# vue3 中使用 ts

```
1 定义ts
interface Config {
  type: string
}
export default defineComponent({
  name: 'App',
  components: {
    HelloWorld,
  },
  // vue3使用ts推荐使用对象作为props传参
  props: {
    age: {
      type: Number as PropType<number>
    },
    config: {
      type: Object as PropType<Config>,
      required: true
    }
  },
  data () {
    return {
      name: 'jiang'
    }
  },
  mounted () {
    this.config.type
  }
})
```

2 使用 defineComponent 定义组件

```
import { createApp, defineComponent, h } from 'vue'
import HelloWord from './components/HelloWorld.vue'

// import方式引入图片ts校验不会通过
const logo = require('./assets/logo.png') // eslint-disable-line
// createElement，h函数用于创建VNode(对createVNode函数的封装)
const App = defineComponent({
  render() {
    return h('div', { id: 'app' }, [
      h('img', {
        alt: 'vue logo',
        src: logo
      }),
      h(HelloWord, {
        msg: 'Welcome to Your Vue.js + TypeScript App',
        age: 12
      })
    ])
  }
})

createApp(App).mount('#app')
```

3 setup 的使用

`import { reactive, ref, computed, watchEffect } from 'vue'`

## reactive

## ref

## computed

## watchEffect

```
  setup() {
    let name = 'jiang'
    const info = reactive({
      age: 12
    })
    // ref: {value: xxx}
    const love = ref('read')
    setInterval(() => {
      name += 1
      info.age += 1
      // love.value += 1
    }, 1000)
    const ageComputed = computed(() => {
      return info.age * 2
    })
    // 副作用函数，watchEffect中调用的变量发生变化就会调用watchEffect()
    watchEffect(() => {
      console.log(info.age)
    })
    return {
      name,
      info,
      love,
      ageComputed
    }
  }
```
